<!DOCTYPE html>
<html>
<head>
    <title>Scan Guild Members - Admin</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #0a0a0a; color: #fff; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { margin-bottom: 30px; color: #00ff00; }
        .controls { background: #1a1a1a; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #333; }
        button { background: #00ff00; color: #000; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }
        button:hover { background: #00cc00; }
        .message { padding: 15px; margin-bottom: 20px; border-radius: 4px; }
        .message.success { background: #1a3a1a; border: 1px solid #00ff00; color: #00ff00; }
        .message.error { background: #3a1a1a; border: 1px solid #ff0000; color: #ff0000; }
        table { width: 100%; border-collapse: collapse; background: #1a1a1a; }
        th { background: #2a2a2a; padding: 12px; text-align: left; border-bottom: 2px solid #00ff00; }
        td { padding: 12px; border-bottom: 1px solid #333; }
        tr:hover { background: #242424; }
        .tier-free { color: #00ff00; }
        .tier-boost { color: #0099ff; }
        .tier-premium { color: #ff9900; }
        .tier-pro { color: #ff00ff; }
        .tier-none { color: #ff0000; }
        .badge { display: inline-block; padding: 4px 8px; border-radius: 3px; font-size: 12px; font-weight: bold; }
        .badge-cooldown { background: #1a3a1a; color: #00ff00; }
        .badge-admin { background: #3a1a1a; color: #ff0000; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Guild Member Tier Scanner</h1>
        
        <div class="controls">
            <form method="POST">
                <input type="hidden" name="action" value="scan">
                <button type="submit">üîç Scan All Members</button>
            </form>
        </div>
        
        {% if message %}
            <div class="message {% if 'Error' in message %}error{% else %}success{% endif %}">
                {{ message }}
            </div>
        {% endif %}
        
        {% if scan_results %}
            <table>
                <thead>
                    <tr>
                        <th>Username</th>
                        <th>User ID</th>
                        <th>Tier</th>
                        <th>Perks</th>
                        <th>Roles</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in scan_results %}
                        <tr>
                            <td>{{ result.username }}</td>
                            <td style="font-family: monospace; font-size: 12px;">{{ result.user_id }}</td>
                            <td>
                                <span class="tier-{{ result.tier }}">
                                    {{ result.tier.upper() }}
                                </span>
                            </td>
                            <td>
                                {% if result.no_cooldown %}
                                    <span class="badge badge-cooldown">‚ö° No Cooldown</span>
                                {% endif %}
                                {% if result.admin %}
                                    <span class="badge badge-admin">üîê Admin</span>
                                {% endif %}
                            </td>
                            <td style="font-size: 12px;">{{ result.role_count }} roles</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
        
        <div style="margin-top: 20px; text-align: center;">
            <a href="/admin" style="color: #00ff00; text-decoration: none;">‚Üê Back to Admin Panel</a>
        </div>
    </div>
</body>
</html>
